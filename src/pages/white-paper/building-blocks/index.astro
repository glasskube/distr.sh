---
import StarlightLayout from '~/layouts/StarlightLayout.astro';
import WhitePaperForm from '~/components/WhitePaperForm.tsx';
import TestimonialsSection from '~/components/home/TestimonialsSection.astro';
import SignUpCta from '~/components/cta/standalone/SignUpCta.astro';
import {Image} from 'astro:assets';
import whitepaperImage from '~/assets/white-paper/building-blocks-teaser.png';

const formsServerBaseUrl = import.meta.env.FORMS_SERVER;
const reCaptchaKeyV2 = import.meta.env.RE_CAPTCHA_KEY_v2;

const TITLE = 'Building Blocks for Modern Self-Managed Software Distribution';
const DESCRIPTION =
  'These building blocks lay the foundation of a successful self-managed software distribution offering that both software vendors and end-customers can depend on.';
---

<StarlightLayout title={TITLE} description={DESCRIPTION}>
  <div class="not-content">
    <!-- Hero Header -->
    <section class="text-center mt-8 mb-12">
      <h1 class="text-4xl font-bold mb-4">{TITLE}</h1>
      <p class="text-xl font-semibold text-gray-600 dark:text-gray-300">
        {DESCRIPTION}
      </p>
    </section>

    <!-- Main Content Section -->
    <section class="container mx-auto px-4 mb-16">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-start">
        <!-- Whitepaper Image -->
        <div class="relative">
          <div class="whitepaper-card rounded-2xl overflow-hidden p-[3px]">
            <div class="bg-white dark:bg-gray-900 rounded-2xl overflow-hidden">
              <Image
                src={whitepaperImage}
                alt="Building Blocks White Paper Preview"
                class="w-full h-auto"
              />
            </div>
          </div>
        </div>

        <!-- Form -->
        <div class="lg:sticky lg:top-8">
          <WhitePaperForm
            client:load
            formsServerBaseUrl={formsServerBaseUrl}
            reCaptchaKeyV2={reCaptchaKeyV2}
          />
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <TestimonialsSection />

    <!-- CTA Section -->
    <SignUpCta />
  </div>
</StarlightLayout>

<style>
  .whitepaper-card {
    position: relative;
    background: linear-gradient(
      to bottom right,
      var(--sl-color-accent-low),
      var(--sl-color-accent)
    );
    border-radius: 1rem;
  }

  .not-content {
    max-width: none;
  }
</style>
