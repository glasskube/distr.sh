---
import {Image} from 'astro:assets';
import {Icon} from 'astro-icon/components';
import type {ImageMetadata} from 'astro';

export interface Props {
  company: string;
  industry: string;
  useCase: string;
  challenge: string;
  solution: string;
  result: string;
  ctoQuote: string;
  logo: ImageMetadata;
  ctoImage: ImageMetadata;
  ctoName: string;
  ctoTitle: string;
  slug: string;
}

const {
  company,
  industry,
  useCase,
  challenge,
  solution,
  result,
  ctoQuote,
  logo,
  ctoImage,
  ctoName,
  ctoTitle,
  slug,
} = Astro.props;
---

<div
  class="bg-white dark:bg-gray-900 rounded-xl p-6 md:p-8 shadow-md max-w-6xl mx-auto"
  data-slug={slug}>
  <!-- Header with Logo and Info -->
  <div
    class="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-12 mb-8">
    <Image
      src={logo}
      alt={`${company} Logo`}
      class="h-24 w-auto rounded-xl object-contain"
      width={200}
      height={96}
    />
    <div class="flex flex-row gap-8">
      <div class="text-center md:text-left">
        <div
          class="text-sm font-semibold text-[#00b5eb] uppercase tracking-wide mb-1">
          Industry:
        </div>
        <div class="text-base font-medium text-gray-900 dark:text-white">
          {industry}
        </div>
      </div>
      <div class="text-center md:text-left">
        <div
          class="text-sm font-semibold text-[#00b5eb] uppercase tracking-wide mb-1">
          Use Case:
        </div>
        <div class="text-base font-medium text-gray-900 dark:text-white">
          {useCase}
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Main Content (2/3) -->
    <div class="lg:col-span-2 space-y-6">
      <!-- Challenge -->
      <div>
        <h3
          class="text-lg font-semibold text-[#00b5eb] uppercase tracking-wide mb-3">
          Challenge
        </h3>
        <div
          class="text-base leading-relaxed text-gray-700 dark:text-gray-300 whitespace-pre-line"
          set:html={challenge}
        />
      </div>

      <!-- Solution -->
      <div>
        <h3
          class="text-lg font-semibold text-[#00b5eb] uppercase tracking-wide mb-3">
          Solution
        </h3>
        <div
          class="text-base leading-relaxed text-gray-700 dark:text-gray-300 whitespace-pre-line"
          set:html={solution}
        />
      </div>

      <!-- Result -->
      <div>
        <h3
          class="text-lg font-semibold text-[#00b5eb] uppercase tracking-wide mb-3">
          Result
        </h3>
        <div
          class="text-base leading-relaxed text-gray-700 dark:text-gray-300 whitespace-pre-line"
          set:html={result}
        />
      </div>
    </div>

    <!-- Sidebar (1/3) -->
    <div class="lg:col-span-1">
      <div
        class="bg-gray-50 dark:bg-gray-800 rounded-xl p-6 sticky top-24 space-y-6">
        <!-- Quote -->
        <blockquote
          class="text-base md:text-lg leading-relaxed italic font-medium text-gray-700 dark:text-gray-300 mb-6">
          "{ctoQuote}"
        </blockquote>

        <!-- CTO Info -->
        <div
          class="flex items-center gap-4 pb-6 border-b border-gray-200 dark:border-gray-700">
          <Image
            src={ctoImage}
            alt={ctoName}
            class="w-14 h-14 md:w-16 md:h-16 rounded-full object-cover flex-shrink-0"
            width={64}
            height={64}
          />
          <div>
            <div class="font-bold text-gray-900 dark:text-white">
              {ctoName}
            </div>
            <div class="text-sm text-gray-600 dark:text-gray-400">
              {ctoTitle}, {company}
            </div>
          </div>
        </div>

        <!-- Back to Case Studies Link -->
        <a
          href="/case-studies/"
          class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-br from-[#00b5eb] to-[#63c5e3] text-white font-medium text-sm hover:shadow-lg transition-all duration-300 hover:scale-105 w-full justify-center">
          <Icon name="lucide:arrow-left" class="w-4 h-4" />
          All case studies
        </a>
      </div>
    </div>
  </div>
</div>
